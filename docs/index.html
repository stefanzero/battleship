<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | battleship</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
  <style>
    .bold {
      font-weight: 900;
    }
  </style>
<meta name="description" content="Battleship game in Node"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="battleship"><meta property="twitter:description" content="Battleship game in Node"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a id="nav-index" href="./index.html">Home</a>
  
  <a id="nav-identifiers" href="identifiers.html">Reference</a>
  <a id="nav-source" href="source.html">Source</a>
  <a id="nav-demo" href="demo.html">Demo</a>
  <a id="nav-test" href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#battleship">battleship</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/board.js~Board.html">Board</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/game.js~Game.html">Game</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/moves.js~Moves.html">Moves</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/ship.js~Ship.html">Ship</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/tile.js~Tile.html">Tile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/battleship/utils.js~Utils.html">Utils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-parameters">parameters</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-orientation">orientation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-orientations">orientations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-parameters">parameters</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-shipType">shipType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-shipTypes">shipTypes</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><style>
  .github-markdown {display: block}
  .github-markdown img:not([src*=".svg"]) {box-shadow: none}
</style>
<div data-ice="index" class="github-markdown"><h1 id="battleship">Battleship</h1><p>This software package is written in Node JavaScript, and represents the 
back-end system for playing the game Battleship.</p>
<p>According to <a href="https://en.wikipedia.org/wiki/Battleship_%28game%29">Wikipedia</a>:</p>
<blockquote>
<p>Battleship is a strategy type guessing game 
for two players. It is played on ruled grids (paper or board) on which 
each player&apos;s fleet of ships (including battleships) are marked. The 
locations of the fleets are concealed from the other player. Players 
alternate turns calling &quot;shots&quot; at the other player&apos;s ships, and the 
objective of the game is to destroy the opposing player&apos;s fleet.</p>
</blockquote>
<p><strong>Paper version of Battleship</strong>
<img src="https://en.wikipedia.org/wiki/File:Battleships_Paper_Game.svg" alt>
<img src="docs/Battleships_Paper_Game.png" alt>
<img src="http://localhost:8081/Battleships_Paper_Game.png" alt></p>
<h2 id="installation">Installation</h2><p>Node version 8 or greater must be installed, as well as npm (Node Package
Manager). In a terminal window, install the required Node packages:</p>
<pre><code class="lang-bash"><code class="source-code prettyprint">git clone https://github.com/stefanzero/battleship.git
npm install</code>
</code></pre>
<h2 id="esdocs">ESDOCS</h2><p>The <a href="https://esdoc.org/">Esdoc</a> system is used to generate web pages 
describing the software components.  By adding special text comments 
called &quot;annotations&quot; within the code, the esdoc Node module reads 
the source files and generates the output files.  The configuration for
Esdoc is in the esdoc section of the package.json file.  The documents 
have already been generated (in this zipfile of Battleship) and are 
located in the docs directory.</p>
<p>Here is an screen shot of the ESDOCS:
<img src="docs/images/Battleship-home.png" alt>
<img src="http://localhost:8081/images/Battleship-home.png" alt></p>
<p><br>
The documents can be generated again with a command in the scripts 
section of package.json.  The &quot;Dev dependencies&quot; (esdoc and related
esdoc plugins) in the package.json must be installed prior to generating 
the docs.</p>
<pre><code class="lang-bash"><code class="source-code prettyprint">npm install --dev
npm run docs</code>
</code></pre>
<h2 id="demo-docs-server">Demo Docs Server</h2><p>Static HTML content (files) can be opened with a web browser, but dynamic 
content requires a web server to generate the content.  In the Esdocs, a &quot;Demo&quot;
web page has been created, that &quot;auto-plays&quot; a random arrangement of 
ships.  Each time the demo page is reloaded, a new game is played and 
displayed. This new game is created by a Node program in the scripts 
directory (scripts/create-demo.js).</p>
<p><br>
A Node program (scripts/serve-docs.js) has been included in this package that runs 
a local HTTP server (on port 8081) that will serve these ESDOCS.  A command 
in the scripts section of package.json (&quot;serve&quot;) will start this local server and 
automatically open the default browser to the Home page of the documentation.
<strong>Please run the install command first, then the serve command NOW</strong>
so you can see the documentation for the sections to be described
below.</p>
<pre><code class="lang-bash"><code class="source-code prettyprint">npm install
npm run serve</code>
</code></pre>
<p>This ReadMe page is duplicated by Esdocs and displayed on the <strong>Home</strong>
link in the navigation bar.</p>
<p>If for some reason Node cannot open a local HTTP server on port 8081, please
open the docs home page directly in your browser:</p>
<pre><code class="lang-bash"><code class="source-code prettyprint">open docs/index.html</code>
</code></pre>
<p>In this case, the Demo page is static and reloading it will just display 
the same game simulation.</p>
<h2 id="object-oriented-design">Object-oriented Design</h2><p>All the objects are displayed in the left column of the Esdocs web
page.  Please click on each item to display a detailed web page with 
a description of all its members and methods.</p>
<ul>
<li>Board</li>
<li>Tile</li>
<li>Ship</li>
<li>Moves</li>
<li>Game</li>
<li>Utils</li>
<li>parameters</li>
</ul>
<p><br>
The Board is the main object that contains tiles and ships, 
and the methods to add ships, automatically set up the board, 
and conduct attacks.  The Board also has a Moves object, which 
keeps track of the history of the game, including a string and 
HTML representation of the board after each move (attack).</p>
<p><br>
The parameters object contains all the constants for configuring 
the game:</p>
<ul>
<li>numRows</li>
<li>numColumns</li>
<li>shipTypes</li>
<li>orientations (this should not be changed)</li>
</ul>
<p><br>
The shipTypes is an object containing the essential information for
a given ship type:</p>
<ul>
<li>shipTypeId (number 1 - 5)</li>
<li>name (Aircraft Carrier, Battleship, Cruiser, Destroyer, Submarine)</li>
<li>length (5, 4, 3, 2, 1 for ships above)</li>
<li>number of each type on the board (1, 1, 1, 2, 2 for ships above)</li>
<li>color (for Board.toString)</li>
<li>backgroundColor (for Board.toHtml)</li>
</ul>
<p><br>
The Game class implements a strategy for playing the game, and
is used to create the Demo page of the Esdocs.  The Game constructor
creates a new board and then sets up the board with ships at 
random positions.  The Game has a <strong>play</strong> method that conducts 
random attacks until a hit is achieved.  Then the surrounding 
tiles of the hit are stored on a stack to be  attacked.  </p>
<p><br>
When a second hit is achieved, the stack is filtered to positions that 
are in a line with the last hit.  When an attack results in a sunken 
ship, the stack is emptied.  But if the stack is emptied without a
sunken ship, the last stack is restored. This is done because if 
two ships are adjacent, the filtering strategy would remove positions 
that should still be tried.  This relatively simple strategy greatly 
improves the rate at which all ships are sunk.  </p>
<p><br>
The auto-play game strategy usually results in a ship being sunk if a 
few moves after any one of its positions are hit.  Since a submarine
has a length of 1 (only 1 tile), it is the hardest ship to sink.
Most often, the submarine is the last ship to be sunk in the auto-play 
simulation.</p>
<h2 id="unit-and-functional-tests">Unit and Functional Tests</h2><p>The Mocha testing utility and the Chai assertion library are used 
to write unit tests for every class and class method.  The tests 
are displayed in the <strong>Test</strong> link in the navigation bar.  </p>
<p>The <strong>Demo</strong> link in the navigation bar is an end-to-end functional 
test of Battleship.  Each time the <strong>Demo</strong> page is reloaded (while the
&quot;npm run server&quot; command is executing), a new 
instance of the Game class is created, which creates a new instance of
Board which is set up with all required ships at random (valid) 
positions.  Then the play method of Game is called.  </p>
<p>The results of the Demo game are displayed as table with 3 columns:</p>
<ul>
<li>Description: Move Number, Position Attacked, Attack Result</li>
<li>Game View: Display of the game with the ships (Enemy View)</li>
<li>Player View: Display of the game with positions attacked, hit or sunk</li>
</ul>
<p><br>
Scrolling down the demo page shows the effectiveness of the auto-play 
strategy.  After a random attack results in a hit, the positions surrounding 
that hit are called and the ship is usually sunk in a few moves later.</p>
<h2 id="changing-game-parameters">Changing Game Parameters</h2><p>The game parameters are in the file parameters.js.  The values for numRows 
and numColumns can be edited to change the size of the board.  The values 
in shipTypes can be edited to change the type of ships on the board, their 
length, number of each type, and color displayed.</p>
<h2 id="playing-the-game">Playing the game</h2><p>A Node program is included in the package to allow a single player to attack a
board with a random arrangment of ships.  In a terminal window this command
starts the game:</p>
<pre><code class="lang-bash"><code class="source-code prettyprint">npm run play</code>
</code></pre>
<p>This starts the program scripts/play.js, which displays the board after each
attack and a prompt to enter the next attack.
<img src="docs/images/Move0.png" alt>
<img src="http://localhost:8081/images/Move0.png" alt></p>
<p>Let&apos;s attack 2, 2.
It is a Miss, so the tile is shown with an &quot;x&quot; in a dark gray:
<img src="docs/images/Move1.png" alt>
<img src="http://localhost:8081/images/Move1.png" alt></p>
<p>Let&apos;s attack 6, 2.
It is a Hit, so the tile is shown with an &quot;x&quot; in orange:
<img src="docs/images/Move2.png" alt>
<img src="http://localhost:8081/images/Move2.png" alt></p>
<p>Here are a few  more attacks:
<img src="docs/images/Move3.png" alt>
<img src="http://localhost:8081/images/Move3.png" alt></p>
<p><img src="docs/images/Move4.png" alt>
<img src="http://localhost:8081/images/Move4.png" alt></p>
<p>Now we get a Hit on the last position of a ship, so it is 
sunk and marked with all x&apos;s in red.
<img src="docs/images/Move5.png" alt>
<img src="http://localhost:8081/images/Move5.png" alt></p>
<p>After many moves, we finally sink the last ship:
<img src="docs/images/Move31.png" alt>
<img src="http://localhost:8081/images/Move31.png" alt></p>
<h2 id="future-extensions">Future extensions</h2><p>Future extensions to this package could be a hosted Express (Node) web site with
API routes to start a new game, add ships, and accept moves (attacks) upon the 
enemy.  This could be accompanied by a front-end web site to allow players to 
use these APIs and display both the &quot;Home View&quot;  (Game view for the player), and
&quot;Player View&quot; for tracking the attacks upon the enemies.  These would correspond 
to the &quot;Game View&quot; and &quot;Player View&quot; columns of the <strong>Demo</strong> page.</p>
</div>
<div class="demo"></div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
<script>
  var path = location.pathname.match(/([\w]*)\./)[1];
  var id = "nav-" + path;
  var element = document.getElementById(id);
  if (element) {
    element.classList.add('bold')
  }
</script>
</body>
</html>
